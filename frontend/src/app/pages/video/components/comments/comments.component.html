<h3>Comments</h3>

<div class="p-fluid">
  <textarea
    type="text"
    pInputTextarea
    [autoResize]="true"
    placeholder="Add comment"
    [formControl]="newComment">
  </textarea>
  <div class="flex justify-content-between flex-wrap">
    <div>
      <small class="p-error" *ngIf="isEmptyAndTouchOrDirty(newComment)">
        Comment must have a body
      </small>
    </div>
    <div *ngIf="isTouchOrDirty(newComment)" class="flex flex-wrap">
      <p-button
        label="Cancel"
        styleClass="p-button-rounded p-button-raised p-button-text"
        class="mr-1 mt-2"
        (onClick)="handleOnCancelCommentClick(newComment)"></p-button>
      <p-button
        label="Comment"
        styleClass="p-button-rounded p-button-raised"
        class="ml-1 mt-2"
        (onClick)="handleOnAddCommentClick(newComment)"
        [disabled]="isEmpty(newComment)"></p-button>
    </div>
  </div>
</div>


<div class="flex comment-container mt-2" *ngFor="let comment of comments; let i = index">
  <div class="flex-none flex mt-1 mr-2">
    <p-avatar [image]="comment.avatarImage" shape="circle" size="48"></p-avatar>
  </div>
  <div class="flex-grow-1 flex flex-column">
    <strong>{{ comment.nickname }}</strong>
    <div>{{ comment.content }}</div>
  </div>
  <div class="flex-none flex align-items-center justify-content-center">
    <p-menu #commentMenu [model]="commentMenuItems" [popup]="true"></p-menu>
    <p-button
    icon="pi pi-ellipsis-v"
    class="three-dots-button"
    styleClass="p-button-rounded p-button-text p-button-secondary"
    (click)="commentMenu.toggle($event)"></p-button>
  </div>
</div>
